我在写一个新的 trading view 策略:
开始为50u,开仓仓位为100u
具体逻辑是MACD 的能量柱跳空的多单

比如在上涨线段中(上涨线段中DEA>0 and DEA 超过当前hist高度)的时候, 
一旦发生量能柱高度的回调(Flag=1): 高度超过前高就进场做多(flag=0)

止损在这个进场这根k线的开盘价格(未来调试 收盘价格or最低价)
如果跌破就止损


进场后再重新计算MACD 柱子的高度,
一旦再发生量能柱高度的回调(Flag=1),高度超过前一个hist就上移止损
到这个k线的开盘价格.
如果跌破就止损


添加一个新的输入参数 作为止损的幅度 后面的止损要减去这个数值, 默认为300
只要一条止损线就好了其他table不要 然后画一个ema21 和 ema52的线就好
跳空之后上移止损到那一根跳空k线的open 价格
 
再加入一个数值为macd 零轴附近阈值 默认为300
当dea 进入这个区间的时候且macd 的红柱开始缩量就可以进入多单 
保证只持有一个多头仓位
把开单和出场的label 去掉 只保留上移止损的label

加入新的做单限制条件 ema21大于ema52 才可以做单
同时去掉这个红色的辅助线


为什么macd 由绿色变为红色的时候会上移止损 这个时候不要改变止损价格 其他情况仍然上移止损
同时不用绘制蓝色的止损value了 保留红色的止损线就好
其他词dea小于0 也不做单啊为什么macd 由绿色变为红色的时候会上移止损 这个时候不要改变止损价格


为什么macd 由绿色变为红色的时候会上移止损 这个时候不要改变止损价格 其他情况仍然上移止损 当前的代码仍然有这个问题, 在上涨限度啊中从从发生柱子的高度开始, 从绿柱变成红柱不会移动止损, 只有绿柱大于前一个绿柱的情况 和 红柱大于前一根红柱会上移止损
然后第二个问题为什么有的时候没有达到止损也会立场?
第三个问题 为什么有的是dea 比阈值大也会入场》?

为什么止损还可能会下降